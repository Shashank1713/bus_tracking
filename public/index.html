<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FRIENDLY TRAVELS</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Cinzel:wght@600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --navy: #0f1833;
      --text: #1b2438;
      --muted: #5e6a80;
      --bg-left: #a9def7;
      --bg-mid: #c8ecfa;
      --bg-right: #f6ead2;
      --orange: #ff8218;
      --orange-dark: #eb730f;
      --card: #f7f8fb;
      --line: #d7dfec;
      --pill: #293247;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: Manrope, sans-serif;
    }

    body {
      color: var(--text);
      background: #E6BC88;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: none;
    }

    body::after {
      content: none;
    }

    body > * {
      position: relative;
      z-index: 1;
    }

    .nav-wrap {
      background: #FFEFD6;
      border-bottom: 1px solid #e8edf4;
      position: sticky;
      top: 0;
      z-index: 20;
    }

    .nav {
      width: min(1320px, calc(100% - 2rem));
      margin: 0 auto;
      height: 90px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }

    .logo {
      text-decoration: none;
      color: var(--navy);
      line-height: 1;
      min-width: 130px;
    }

    .logo strong {
      display: block;
      font-size: 3rem;
      font-weight: 900;
      letter-spacing: 0.02em;
    }

    .logo .brand-friendly {
      font-family: "Cinzel", serif;
      font-size: 2.6rem;
      font-weight: 700;
      letter-spacing: 0.04em;
      line-height: 1;
    }

    .logo span {
      display: block;
      font-size: 0.95rem;
      font-weight: 600;
      letter-spacing: 0.42em;
      margin-top: 4px;
      color: #7282a3;
      text-transform: uppercase;
    }

    .menu {
      display: flex;
      gap: 2rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .menu a {
      text-decoration: none;
      color: #131d32;
      font-size: 1.02rem;
      font-weight: 700;
    }

    .menu a:hover {
      color: #32486f;
    }

    .signin {
      text-decoration: none;
      color: #fff;
      background: linear-gradient(180deg, #ff8d23 0%, var(--orange) 100%);
      border-radius: 999px;
      padding: 14px 34px;
      font-weight: 800;
      box-shadow: 0 10px 22px rgba(255, 130, 24, 0.32);
      white-space: nowrap;
    }

    .account-wrap {
      position: relative;
      display: inline-flex;
      align-items: center;
    }

    .account-menu {
      position: absolute;
      top: calc(100% + 10px);
      right: 0;
      width: min(360px, calc(100vw - 2rem));
      background: #ececec;
      border: 1px solid #d4d4d4;
      border-radius: 16px;
      box-shadow: 0 18px 32px rgba(28, 35, 54, 0.18);
      padding: 14px;
      display: none;
      z-index: 80;
    }

    .account-menu.open {
      display: block;
    }

    .account-menu a,
    .account-menu button {
      display: flex;
      align-items: center;
      width: 100%;
      min-height: 44px;
      border: none;
      background: transparent;
      color: #262a30;
      font-size: 1.08rem;
      font-weight: 600;
      text-decoration: none;
      text-align: left;
      border-radius: 8px;
      padding: 0 10px;
      cursor: pointer;
    }

    .account-menu a:hover,
    .account-menu button:hover {
      background: #dddddd;
    }

    .account-menu hr {
      border: none;
      border-top: 1px solid #cfcfcf;
      margin: 8px 4px;
    }

    .validation-alert {
      position: fixed;
      top: 28px;
      left: 50%;
      transform: translateX(-50%) translateY(-10px);
      width: min(470px, calc(100% - 2rem));
      min-height: 66px;
      border: 2px solid #2d3dbf;
      border-radius: 34px;
      background: #f4f6ff;
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 16px;
      z-index: 60;
      opacity: 0;
      pointer-events: none;
      transition: opacity 180ms ease, transform 180ms ease;
    }

    .validation-alert.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
      pointer-events: auto;
    }

    .validation-alert .icon {
      width: 30px;
      height: 30px;
      border: 2px solid #2d3dbf;
      border-radius: 50%;
      color: #2d3dbf;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 1.45rem;
      line-height: 1;
      flex: 0 0 auto;
    }

    .validation-alert .message {
      color: #2d3dbf;
      font-size: clamp(1.08rem, 1.5vw, 1.45rem);
      font-weight: 700;
      letter-spacing: 0.01em;
    }

    .validation-alert .close {
      margin-left: auto;
      border: none;
      background: transparent;
      color: #2d3dbf;
      font-size: 1.45rem;
      line-height: 1;
      cursor: pointer;
      padding: 0 4px;
    }

    .main {
      width: min(1320px, calc(100% - 2rem));
      margin: 34px auto 60px;
    }

    .hero {
      min-height: 760px;
      border-radius: 38px;
      overflow: visible;
      position: relative;
    }

    .hero-media {
      border-radius: 38px;
      min-height: 600px;
      padding: 64px;
      position: relative;
      overflow: hidden;
      background:
        linear-gradient(90deg, rgba(42, 26, 6, 0.84) 0%, rgba(67, 41, 9, 0.58) 38%, rgba(96, 58, 11, 0.28) 72%),
        url("https://images.pexels.com/photos/386009/pexels-photo-386009.jpeg?auto=compress&cs=tinysrgb&w=1600") center/cover no-repeat;
      box-shadow: 0 24px 58px rgba(14, 22, 42, 0.22);
    }

    .hero-content {
      max-width: 760px;
      position: relative;
      z-index: 2;
      color: #fff;
    }

    .hero h1 {
      font-size: clamp(2rem, 4.2vw, 3.8rem);
      line-height: 1.05;
      font-weight: 900;
      letter-spacing: -0.03em;
      margin-bottom: 18px;
      text-wrap: balance;
    }

    .hero p {
      max-width: 720px;
      font-size: clamp(0.98rem, 1.2vw, 1.08rem);
      line-height: 1.55;
      color: #e4e9f6;
      margin-bottom: 20px;
    }

    .badges {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-height: 38px;
      padding: 0 16px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.32);
      background: rgba(17, 27, 48, 0.52);
      color: #f5f8ff;
      font-size: 0.95rem;
      font-weight: 700;
    }

    .search-card {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: 18px;
      width: min(1080px, calc(100% - 4rem));
      background: var(--card);
      border: 1px solid #e7edf6;
      border-radius: 20px;
      box-shadow: 0 18px 38px rgba(31, 47, 76, 0.14);
      padding: 14px;
      z-index: 3;
    }

    .trip {
      display: flex;
      gap: 14px;
      margin-bottom: 10px;
      flex-wrap: wrap;
      font-size: 0.95rem;
      font-weight: 700;
      color: #435069;
    }

    .trip label {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }

    .trip input {
      accent-color: #2d7cff;
      width: 16px;
      height: 16px;
    }

    .form {
      display: grid;
      grid-template-columns: 1fr auto 1fr 1fr auto;
      gap: 10px;
      align-items: center;
    }

    .source-field-wrap {
      position: relative;
    }

    .field {
      min-height: 52px;
      border-radius: 16px;
      border: 1px solid #d5deea;
      background: #fff;
      font-size: 1rem;
      color: #232e44;
      padding: 0 14px;
      outline: none;
    }

    .field::placeholder {
      color: #808ba0;
    }

    .field:focus {
      border-color: #adc3e4;
      box-shadow: 0 0 0 3px rgba(87, 124, 180, 0.13);
    }

    .source-field-wrap .field {
      width: 100%;
    }

    .source-menu {
      position: absolute;
      top: calc(100% + 8px);
      left: 0;
      width: 100%;
      max-height: 360px;
      overflow-y: auto;
      background: #ffffff;
      border: 1px solid #d2d9e7;
      border-radius: 12px;
      box-shadow: 0 10px 26px rgba(24, 35, 58, 0.2);
      display: none;
      z-index: 20;
    }

    .source-menu.open {
      display: block;
    }

    .source-option {
      width: 100%;
      text-align: left;
      border: none;
      border-bottom: 1px solid #edf1f8;
      background: #ffffff;
      color: #1f293f;
      font-size: 1.02rem;
      font-weight: 700;
      padding: 11px 14px;
      cursor: pointer;
    }

    .source-option:last-child {
      border-bottom: none;
    }

    .source-option:hover {
      background: #f1f4fa;
    }

    .source-empty {
      padding: 12px 14px;
      color: #65728a;
      font-size: 0.96rem;
      font-weight: 600;
    }

    .swap-btn {
      width: 44px;
      height: 44px;
      border: none;
      border-radius: 50%;
      background: #2d3dbf;
      color: #ffffff;
      font-size: 1.3rem;
      font-weight: 800;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 18px rgba(45, 61, 191, 0.28);
      transition: transform 140ms ease, background-color 140ms ease;
    }

    .swap-btn:hover {
      transform: translateY(-1px);
      background: #2232a8;
    }

    .search-btn {
      min-height: 52px;
      border: none;
      border-radius: 18px;
      background: linear-gradient(180deg, #ff932c 0%, var(--orange) 100%);
      color: #fff;
      font-size: 1.05rem;
      font-weight: 800;
      padding: 0 26px;
      cursor: pointer;
      transition: transform 180ms ease, background-color 180ms ease;
    }

    .search-btn:hover {
      transform: translateY(-1px);
      background: linear-gradient(180deg, #ff9f41 0%, var(--orange-dark) 100%);
    }

    .days {
      margin-top: 12px;
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .days button {
      border: 1px solid #d8b572;
      border-radius: 999px;
      min-height: 34px;
      padding: 0 16px;
      font-size: 0.95rem;
      font-weight: 700;
      background: #f9f2dd;
      color: #966921;
      cursor: pointer;
    }

    .offers {
      margin-top: 48px;
      padding: 0 14px;
    }

    .offers h2 {
      font-size: clamp(2.2rem, 4.8vw, 4rem);
      line-height: 1.06;
      letter-spacing: -0.02em;
      color: #101a35;
      margin-bottom: 10px;
      font-weight: 900;
    }

    .offers p {
      font-size: clamp(1rem, 1.55vw, 1.17rem);
      color: #56627b;
      font-weight: 500;
    }

    .all-pages {
      margin-top: 28px;
      padding: 18px;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.66);
      border: 1px solid #dfcba8;
    }

    .all-pages h3 {
      font-size: clamp(1.3rem, 2vw, 1.8rem);
      color: #132246;
      margin-bottom: 12px;
      font-weight: 800;
    }

    .all-pages-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
      gap: 10px;
    }

    .all-pages-grid a {
      text-decoration: none;
      color: #132246;
      background: #fff8eb;
      border: 1px solid #e3d3b6;
      border-radius: 12px;
      min-height: 42px;
      display: flex;
      align-items: center;
      padding: 0 12px;
      font-weight: 700;
    }

    .all-pages-grid a:hover {
      background: #fff0d8;
    }

    @keyframes gentleFlow {
      0% {
        background-position: 0% 0%, 100% 0%, 50% 100%, 0% 0%;
      }
      50% {
        background-position: 20% 12%, 82% 14%, 48% 92%, 100% 100%;
      }
      100% {
        background-position: 0% 0%, 100% 0%, 50% 100%, 0% 0%;
      }
    }

    @media (max-width: 1100px) {
      .menu {
        gap: 1.2rem;
      }

      .hero-media {
        padding: 36px 28px;
      }

      .form {
        grid-template-columns: 1fr 1fr;
      }

      .search-btn {
        width: 100%;
      }
    }

    @media (max-width: 820px) {
      .nav {
        height: auto;
        padding: 14px 0;
        flex-direction: column;
      }

      .menu {
        justify-content: center;
      }

      .hero {
        min-height: 880px;
      }

      .hero-media {
        min-height: 650px;
      }

      .search-card {
        width: calc(100% - 1.2rem);
      }

      .form {
        grid-template-columns: 1fr;
      }

      .field,
      .search-btn {
        font-size: 1rem;
      }
    }

    @media (max-width: 520px) {
      .logo .brand-friendly {
        font-size: 2rem;
      }

      .logo strong {
        font-size: 2.2rem;
      }

      .logo span {
        font-size: 0.75rem;
      }

      .hero-media {
        border-radius: 24px;
      }

      .hero {
        min-height: 900px;
      }

      .search-card {
        border-radius: 18px;
      }

      .field,
      .search-btn {
        min-height: 50px;
        font-size: 0.98rem;
      }

      .source-menu {
        max-height: 280px;
      }
    }
  </style>
</head>
<body>
  <div id="validation-alert" class="validation-alert" role="alert" aria-live="assertive">
    <span class="icon">×</span>
    <p id="validation-alert-message" class="message">Please Select From City</p>
    <button id="validation-alert-close" class="close" type="button" aria-label="Close">×</button>
  </div>

  <header class="nav-wrap">
    <div class="nav">
      <a class="logo" href="index.html">
        <strong><span class="brand-friendly">FRIENDLY</span></strong>
        <span>TRAVELS</span>
      </a>

      <nav class="menu" aria-label="Primary">
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="feedback.html">Contact</a>
        <a href="popular-destinations.html">Popular Destinations</a>
        <a href="my-bookings.html">My Trips</a>
        <a href="admin-ops.html">Admin</a>
      </nav>

      <div class="account-wrap">
        <a id="signin-link" class="signin" href="login.html">Sign in / Sign up</a>
        <div id="account-menu" class="account-menu" aria-label="Account menu">
          <a href="my-account.html">My Profile</a>
          <a href="my-bookings.html">My Bookings</a>
          <a href="wallet.html">Wallet</a>
          <hr />
          <a href="live-tracking.html?busId=BUS-101&source=Bangalore&destination=Hyderabad&date=2026-02-20">Track My Bus</a>
          <a href="feedback.html">Feedback</a>
          <a href="popular-destinations.html">Popular Destinations</a>
          <a href="about.html">About Us</a>
          <hr />
          <button id="signout-btn" type="button">Sign Out</button>
        </div>
      </div>
    </div>
  </header>

  <main class="main">
    <section class="hero">
      <div class="hero-media">
        <div class="hero-content">
          <h1>Fun, Safe, and Super Easy Bus Travel for Everyone.</h1>
          <p>From kids to grandparents, plan your trip in seconds and travel stress-free with real-time updates.</p>

          <div class="badges">
            <span class="badge">Family Friendly</span>
            <span class="badge">Live Tracking</span>
            <span class="badge">Best Prices</span>
          </div>
        </div>
      </div>

      <section class="search-card" aria-label="Search trips">
        <div class="trip">
          <label><input type="radio" name="trip" checked /> One way</label>
          <label><input type="radio" name="trip" /> Round Trip</label>
        </div>

        <form id="search-form" class="form" action="search-results.html" method="get">
          <div class="source-field-wrap">
            <input id="source-input" name="source" class="field" type="text" placeholder="Source" aria-label="Source" autocomplete="off" />
            <div id="source-menu" class="source-menu" role="listbox" aria-label="Source locations"></div>
          </div>
          <button id="swap-locations" class="swap-btn" type="button" aria-label="Swap source and destination">↔</button>
          <div class="source-field-wrap">
            <input id="destination-input" name="destination" class="field" type="text" placeholder="Destination" aria-label="Destination" autocomplete="off" />
            <div id="destination-menu" class="source-menu" role="listbox" aria-label="Destination locations"></div>
          </div>
          <input id="journey-date" name="date" class="field" type="date" value="2026-02-20" aria-label="Date" />
          <button class="search-btn" type="submit">Search</button>
        </form>

        <div class="days">
          <button type="button">Today</button>
          <button type="button">Tomorrow</button>
        </div>
      </section>
    </section>

    <section class="offers">
      <h2>Super FRIENDLY Offers and Travel Deals</h2>
      <p>Make your journey better with our latest offers, deals, and rewards.</p>
      <section class="all-pages" aria-label="All project pages">
        <h3>All Updated Pages</h3>
        <div class="all-pages-grid">
          <a href="about.html">About</a>
          <a href="admin.html">Admin Dashboard</a>
          <a href="admin-ops.html">Admin Ops</a>
          <a href="auth.html">Auth</a>
          <a href="booking.html?tripId=BUS-101-2026-02-20T06:00&seats=1A&source=Bangalore&destination=Hyderabad&date=2026-02-20">Booking</a>
          <a href="booking-success.html">Booking Success</a>
          <a href="bus-details.html">Bus Details</a>
          <a href="driver.html">Driver</a>
          <a href="feedback.html">Feedback</a>
          <a href="live-tracking.html?busId=BUS-101&source=Bangalore&destination=Hyderabad&date=2026-02-20">Live Tracking</a>
          <a href="login.html">Login</a>
          <a href="my-account.html">My Account</a>
          <a href="my-bookings.html">My Bookings</a>
          <a href="my-profile.html">My Profile</a>
          <a href="passenger-details.html">Passenger Details</a>
          <a href="payment.html">Payment</a>
          <a href="popular-destinations.html">Popular Destinations</a>
          <a href="search-results.html?source=Bangalore&destination=Hyderabad&date=2026-02-20">Search Results</a>
          <a href="seat-selection.html">Seat Selection</a>
          <a href="user.html">User</a>
          <a href="wallet.html">Wallet</a>
        </div>
      </section>
    </section>
  </main>

  <script>
    const popularPlacesIndia = [
      "Agra", "Ahmedabad", "Ajmer", "Alappuzha", "Alibaug", "Allahabad", "Almora", "Amritsar", "Anand", "Aurangabad",
      "Auli", "Ayodhya", "Badami", "Badrinath", "Balasore", "Bangalore", "Belgaum", "Bhopal", "Bhubaneswar", "Bikaner",
      "Bodh Gaya", "Calangute", "Chandigarh", "Chennai", "Cherrapunji", "Chikmagalur", "Coimbatore", "Coonoor", "Cuttack", "Daman",
      "Darjeeling", "Dehradun", "Delhi", "Dharamshala", "Digha", "Diu", "Dwarka", "Ernakulam", "Faridabad", "Gangtok",
      "Gaya", "Goa", "Gokarna", "Gulmarg", "Gurugram", "Guwahati", "Gwalior", "Hampi", "Haridwar", "Hospet",
      "Hubli", "Hyderabad", "Imphal", "Indore", "Itanagar", "Jabalpur", "Jaipur", "Jaisalmer", "Jalandhar", "Jammu",
      "Jamnagar", "Jamshedpur", "Jodhpur", "Joshimath", "Junagadh", "Kanchipuram", "Kannur", "Kanpur", "Kanyakumari", "Kargil",
      "Karwar", "Kasauli", "Katra", "Kochi", "Kodaikanal", "Kolkata", "Kollam", "Konark", "Kota", "Kovalam",
      "Kozhikode", "Kullu", "Kurukshetra", "Leh", "Lucknow", "Ludhiana", "Madurai", "Mahabaleshwar", "Mahabalipuram", "Manali",
      "Mangalore", "Mathura", "Mcleodganj", "Meerut", "Mount Abu", "Mumbai", "Munnar", "Mussoorie", "Mysore", "Nagpur",
      "Nainital", "Nashik", "Noida", "Ooty", "Orchha", "Pahalgam", "Palakkad", "Panaji", "Panchgani", "Patna",
      "Pondicherry", "Port Blair", "Prayagraj", "Pune", "Puri", "Pushkar", "Raipur", "Rajkot", "Rameswaram", "Ranchi",
      "Ranikhet", "Rishikesh", "Saputara", "Shillong", "Shimla", "Shirdi", "Siliguri", "Srinagar", "Surat", "Thanjavur",
      "Thekkady", "Thiruvananthapuram", "Tirupati", "Trichy", "Udaipur", "Udupi", "Vadodara", "Varanasi", "Varkala", "Vijayawada",
      "Visakhapatnam", "Vrindavan", "Wayanad"
    ];

    function setupLocationDropdown(inputId, menuId) {
      const input = document.getElementById(inputId);
      const menu = document.getElementById(menuId);
      const places = [...popularPlacesIndia].sort((a, b) => a.localeCompare(b));

      function renderOptions(term) {
        const search = term.trim().toLowerCase();
        const filtered = places.filter((place) => place.toLowerCase().includes(search));
        menu.innerHTML = "";

        if (filtered.length === 0) {
          const empty = document.createElement("div");
          empty.className = "source-empty";
          empty.textContent = "No matching location found";
          menu.appendChild(empty);
          return;
        }

        filtered.forEach((place) => {
          const option = document.createElement("button");
          option.type = "button";
          option.className = "source-option";
          option.textContent = place;
          option.addEventListener("click", () => {
            input.value = place;
            menu.classList.remove("open");
          });
          menu.appendChild(option);
        });
      }

      function openMenu() {
        menu.classList.add("open");
      }

      function closeMenu() {
        menu.classList.remove("open");
      }

      input.addEventListener("focus", () => {
        renderOptions(input.value);
        openMenu();
      });

      input.addEventListener("click", () => {
        renderOptions(input.value);
        openMenu();
      });

      input.addEventListener("input", () => {
        renderOptions(input.value);
        openMenu();
      });

      input.addEventListener("keydown", (event) => {
        if (event.key === "Escape") {
          closeMenu();
        }
      });

      document.addEventListener("click", (event) => {
        const wrapper = input.closest(".source-field-wrap");
        if (!wrapper.contains(event.target)) {
          closeMenu();
        }
      });

      renderOptions("");
    }

    setupLocationDropdown("source-input", "source-menu");
    setupLocationDropdown("destination-input", "destination-menu");

    const searchForm = document.getElementById("search-form");
    const swapLocationsButton = document.getElementById("swap-locations");
    const sourceInput = document.getElementById("source-input");
    const destinationInput = document.getElementById("destination-input");
    const journeyDate = document.getElementById("journey-date");
    const signinLink = document.getElementById("signin-link");
    const accountMenu = document.getElementById("account-menu");
    const signoutBtn = document.getElementById("signout-btn");
    const validationAlert = document.getElementById("validation-alert");
    const validationAlertMessage = document.getElementById("validation-alert-message");
    const validationAlertClose = document.getElementById("validation-alert-close");
    let alertTimer;

    function showValidationAlert(message) {
      validationAlertMessage.textContent = message;
      validationAlert.classList.add("show");
      window.clearTimeout(alertTimer);
      alertTimer = window.setTimeout(() => {
        validationAlert.classList.remove("show");
      }, 2600);
    }

    swapLocationsButton.addEventListener("click", () => {
      const sourceValue = sourceInput.value;
      sourceInput.value = destinationInput.value;
      destinationInput.value = sourceValue;
    });

    validationAlertClose.addEventListener("click", () => {
      validationAlert.classList.remove("show");
      window.clearTimeout(alertTimer);
    });

    searchForm.addEventListener("submit", (event) => {
      const source = sourceInput.value.trim();
      const destination = destinationInput.value.trim();
      const date = journeyDate.value.trim();

      if (!source) {
        event.preventDefault();
        showValidationAlert("Please Select From City");
        return;
      }

      if (!destination) {
        event.preventDefault();
        showValidationAlert("Please Select Destination City");
        return;
      }

      if (!date) {
        event.preventDefault();
        showValidationAlert("Please Select Journey Date");
      }
    });

    let isSignedIn = false;

    async function syncAccountState() {
      const appToken = localStorage.getItem("appToken");
      if (!appToken) {
        isSignedIn = false;
        return;
      }

      try {
        const response = await fetch("/api/auth/me", {
          headers: {
            Authorization: `Bearer ${appToken}`
          }
        });

        if (!response.ok) {
          localStorage.removeItem("appToken");
          localStorage.removeItem("mobile");
          localStorage.removeItem("identity");
          isSignedIn = false;
          return;
        }

        isSignedIn = true;
        signinLink.textContent = "My Account";
        signinLink.href = "#";
      } catch (error) {
        // Keep default signed-out state when server is unavailable.
        isSignedIn = false;
      }
    }

    signinLink.addEventListener("click", (event) => {
      if (!isSignedIn) {
        return;
      }
      event.preventDefault();
      accountMenu.classList.toggle("open");
    });

    document.addEventListener("click", (event) => {
      const wrapper = event.target.closest(".account-wrap");
      if (!wrapper) {
        accountMenu.classList.remove("open");
      }
    });

    signoutBtn.addEventListener("click", async () => {
      localStorage.removeItem("appToken");
      localStorage.removeItem("mobile");
      localStorage.removeItem("identity");
      accountMenu.classList.remove("open");
      signinLink.textContent = "Sign in / Sign up";
      signinLink.href = "login.html";
      isSignedIn = false;
      try {
        await fetch("/api/logout");
      } catch (error) {}
      window.location.href = "login.html";
    });

    syncAccountState();
  </script>
</body>
</html>
